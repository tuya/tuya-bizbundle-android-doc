
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Scene BizBundle Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-richquotes/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="faq/faq.html" />
    
    
    <link rel="prev" href="ipc/camera_panel.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../pages/prepare.html">
            
                <a href="../pages/prepare.html">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../pages/access.html">
            
                <a href="../pages/access.html">
            
                    
                    Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../pages/biznav.html">
            
                <a href="../pages/biznav.html">
            
                    
                    UI Biz Bundle Navigation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../pages/mall/mall.html">
            
                <a href="../pages/mall/mall.html">
            
                    
                    Mall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../pages/activator/activator_device.html">
            
                <a href="../pages/activator/activator_device.html">
            
                    
                    Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../pages/panel/panel_device.html">
            
                <a href="../pages/panel/panel_device.html">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../pages/ipc/camera_panel.html">
            
                <a href="../pages/ipc/camera_panel.html">
            
                    
                    IPC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../pages/scene.html">
            
                <a href="../pages/scene.html">
            
                    
                    Scene 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../pages/camera_cloud_video_service.html">
            
                <a href="../pages/camera_cloud_video_service.html">
            
                    
                    Cloud Service
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../pages/faq/faq.html">
            
                <a href="../pages/faq/faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../pages/message/messagecenter.html">
            
                <a href="../pages/message/messagecenter.html">
            
                    
                    Message Center
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../pages/biz_faq.html">
            
                <a href="../pages/biz_faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../pages/updates.html">
            
                <a href="../pages/updates.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="./">
            
                <a href="./">
            
                    
                    3.17
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="prepare.html">
            
                <a href="prepare.html">
            
                    
                    Prepare
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="access.html">
            
                <a href="access.html">
            
                    
                    Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="biznav.html">
            
                <a href="biznav.html">
            
                    
                    BizBundle Navigation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="mall/">
            
                <a href="mall/">
            
                    
                    H5 Mall
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.2" data-path="activator/activator_device.html">
            
                <a href="activator/activator_device.html">
            
                    
                    Device Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3" data-path="panel/panel_device.html">
            
                <a href="panel/panel_device.html">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4" data-path="ipc/camera_panel.html">
            
                <a href="ipc/camera_panel.html">
            
                    
                    IPC Device BizBundle
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.3.5" data-path="scene.html">
            
                <a href="scene.html">
            
                    
                    Scene BizBundle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.6" data-path="faq/faq.html">
            
                <a href="faq/faq.html">
            
                    
                    FAQ BizBundle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.7" data-path="message/messagecenter.html">
            
                <a href="message/messagecenter.html">
            
                    
                    Message Center BizBundle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="updates.html">
            
                <a href="updates.html">
            
                    
                    Changelog
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Scene BizBundle</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#scene-biz-bundle"><b>1. </b>Scene Biz Bundle</a></li><ul><li><span class="title-icon "></span><a href="#features"><b>1.1. </b>Features</a></li><li><span class="title-icon "></span><a href="#biz-bundle-integration"><b>1.2. </b>Biz Bundle integration</a></li><ul><li><span class="title-icon "></span><a href="#create-project"><b>1.2.1. </b>Create project</a></li><li><span class="title-icon "></span><a href="#modules-buildgradle-configuration"><b>1.2.2. </b>module&apos;s build.gradle configuration</a></li><li><span class="title-icon "></span><a href="#initialize-operation-in-application"><b>1.2.3. </b>Initialize operation in Application</a></li></ul><li><span class="title-icon "></span><a href="#service-agreement"><b>1.3. </b>Service Agreement</a></li><ul><li><span class="title-icon "></span><a href="#provide-services"><b>1.3.1. </b>Provide services</a></li><li><span class="title-icon "></span><a href="#create-scene"><b>1.3.2. </b>Create Scene</a></li><li><span class="title-icon "></span><a href="#edit-scene"><b>1.3.3. </b>Edit Scene</a></li><li><span class="title-icon "></span><a href="#set-geographic-location"><b>1.3.4. </b>Set geographic location</a></li><li><span class="title-icon "></span><a href="#set-app-map-class"><b>1.3.5. </b>Set App Map Class</a></li><li><span class="title-icon "></span><a href="#save-map-selection-data"><b>1.3.6. </b>Save map selection data</a></li></ul></ul></ul></div><a href="#scene-biz-bundle" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="scene-biz-bundle"><a name="scene-biz-bundle" class="anchor-navigation-ex-anchor" href="#scene-biz-bundle"><i class="fa fa-link" aria-hidden="true"></i></a>1. Scene Biz Bundle</h1>
<h2 id="features"><a name="features" class="anchor-navigation-ex-anchor" href="#features"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Features</h2>
<p>The business functions include the business logic and UI interface of &quot;add scene&quot; and &quot;edit scene&quot; of the Tuya smart scene module.</p>
<p>Intelligent scenes are divided into &quot;one-key execution scenes&quot; and &quot;automated scenes&quot;, hereinafter referred to as &quot;scene&quot; and &quot;automation&quot;, respectively.</p>
<p>The scenario is that the user adds an action and triggers it manually; the automation is a condition set by the user, and when the condition is triggered, the set action is automatically executed.</p>
<p>Tuya Cloud supports users to set weather or equipment conditions based on actual life scenarios. When the conditions are met, let one or more equipment perform the corresponding tasks.</p>
<h2 id="biz-bundle-integration"><a name="biz-bundle-integration" class="anchor-navigation-ex-anchor" href="#biz-bundle-integration"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Biz Bundle integration</h2>
<h3 id="create-project"><a name="create-project" class="anchor-navigation-ex-anchor" href="#create-project"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.1. Create project</h3>
<p>   Create your project in Android Studio, connect to the public SDK and configure it</p>
<h3 id="modules-buildgradle-configuration"><a name="modules-buildgradle-configuration" class="anchor-navigation-ex-anchor" href="#modules-buildgradle-configuration"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.2. module&apos;s build.gradle configuration</h3>
<pre class="language-"><code class="lang-groovy">  android <span class="token punctuation">{</span>
        defaultConfig <span class="token punctuation">{</span>
          ndk <span class="token punctuation">{</span>
              abiFilters <span class="token string">&quot;armeabi-v7a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;arm64-v8a&quot;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      repositories <span class="token punctuation">{</span>
          flatDir <span class="token punctuation">{</span>
              dirs <span class="token string">&apos;libs&apos;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      compileOptions <span class="token punctuation">{</span>
          sourceCompatibility <span class="token number">1.8</span>
          targetCompatibility <span class="token number">1.8</span>
      <span class="token punctuation">}</span>

      packagingOptions <span class="token punctuation">{</span>
          pickFirst <span class="token string">&apos;lib/*/libc++_shared.so&apos;</span>
      <span class="token punctuation">}</span>

    lintOptions <span class="token punctuation">{</span>
          abortOnError <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        implementation <span class="token function">fileTree</span><span class="token punctuation">(</span>dir<span class="token punctuation">:</span> <span class="token string">&apos;libs&apos;</span><span class="token punctuation">,</span> include<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&apos;*.jar&apos;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token comment">//scene require start</span>
        implementation <span class="token string">&apos;com.android.support:appcompat-v7:28.0.0&apos;</span>
        implementation <span class="token string">&quot;com.android.support:recyclerview-v7:28.0.0&quot;</span>
        implementation <span class="token string">&quot;com.android.support:cardview-v7:28.0.0&quot;</span>
        implementation <span class="token string">&quot;com.android.support:design:28.0.0&quot;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart:3.17.6-beta2&apos;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-appshell:3.10.0&apos;</span>
        implementation <span class="token string">&quot;com.tuya.smart:tuyasmart-base:3.17.0r139-rc.3&quot;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-stencilwrapper:3.17.0.2r139&apos;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-stencilmodel:3.17.0r139-rc.2&apos;</span>
        implementation <span class="token string">&quot;com.tuya.smart:tuyasmart-framework:3.17.0.2r139-external&quot;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-uispecs:0.0.9&apos;</span>
        implementation <span class="token string">&apos;jp.wasabeef:recyclerview-animators:2.2.4&apos;</span>
        implementation <span class="token string">&apos;com.alibaba:fastjson:1.1.67.android&apos;</span>
        implementation <span class="token string">&apos;com.squareup.okhttp3:okhttp-urlconnection:3.12.3&apos;</span>
        implementation <span class="token string">&apos;io.reactivex.rxjava2:rxandroid:2.1.1&apos;</span>
        implementation <span class="token string">&apos;io.reactivex.rxjava2:rxjava:2.2.9&apos;</span>
        implementation <span class="token string">&apos;com.facebook.fresco:fresco:1.13.0&apos;</span>
        implementation <span class="token string">&apos;com.facebook.fresco:imagepipeline-okhttp3:1.3.0&apos;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-uiadapter:3.13.3r129-rc.4&apos;</span>
        implementation <span class="token string">&apos;com.google.android:flexbox:0.2.5&apos;</span>
        implementation <span class="token string">&apos;com.facebook.fbui.textlayoutbuilder:textlayoutbuilder:1.4.0&apos;</span>
        implementation <span class="token string">&apos;com.tuya.smart:react-native:0.51.1.11&apos;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-tuya-mist-litho-base:3.13.0r127-rc.7&apos;</span>
        implementation <span class="token string">&apos;com.tuya.android:mist-litho:1.3.31&apos;</span>
        implementation <span class="token string">&apos;com.tuya.android:mist-litho-fresco:1.3.30&apos;</span>
        implementation <span class="token string">&apos;com.tuya.android:mist-litho-sections-widget:1.3.30&apos;</span>
        implementation <span class="token string">&apos;com.tuya.android:mist-litho-widget:1.3.30&apos;</span>
        implementation <span class="token string">&apos;com.tuya.android:mist-litho-sections-core:1.3.30&apos;</span>
        implementation <span class="token string">&apos;com.tuya.android:mist-litho-annotation:1.0.0&apos;</span>
        implementation <span class="token string">&apos;com.tuya.android:mist-litho-core:1.3.30&apos;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-scene:3.17.6r141-rc.15&apos;</span>
        implementation <span class="token string">&apos;com.tuya.smart:tuyasmart-scene-business-api:3.17.6r141-rc.1&apos;</span>
        <span class="token string">//</span>scene require end      
    <span class="token punctuation">}</span>
</code></pre>
<h3 id="initialize-operation-in-application"><a name="initialize-operation-in-application" class="anchor-navigation-ex-anchor" href="#initialize-operation-in-application"><i class="fa fa-link" aria-hidden="true"></i></a>1.2.3. Initialize operation in Application</h3>
<pre class="language-"><code class="lang-java">
   <span class="token class-name">SoLoader</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">MistConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MistConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   config<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">MistCore</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="service-agreement"><a name="service-agreement" class="anchor-navigation-ex-anchor" href="#service-agreement"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Service Agreement</h2>
<h3 id="provide-services"><a name="provide-services" class="anchor-navigation-ex-anchor" href="#provide-services"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. Provide services</h3>
<p>The scene biz bundle implements <code>ITuyaSceneBusinessService</code> to provide services.</p>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"> <span class="token comment">//Get scene bizbundle service</span>
<span class="token class-name">ITuyaSceneBusinessService</span> iTuyaSceneBusinessService <span class="token operator">=</span> <span class="token class-name">MicroContext</span><span class="token punctuation">.</span><span class="token function">findServiceByInterface</span><span class="token punctuation">(</span><span class="token class-name">ITuyaSceneBusinessService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="create-scene"><a name="create-scene" class="anchor-navigation-ex-anchor" href="#create-scene"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.2. Create Scene</h3>
<p>Enter the scene adding page by getting the family ID</p>
<p><strong>Declaration</strong></p>
<p>Go to create scene page</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">ITuyaSceneBusinessService</span><span class="token punctuation">.</span><span class="token function">addScene</span><span class="token punctuation">(</span><span class="token class-name">Activity</span> activity<span class="token punctuation">,</span> <span class="token keyword">long</span> homeId<span class="token punctuation">,</span> <span class="token keyword">int</span> requestCode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>activity</td>
<td>Activity Object</td>
</tr>
<tr>
<td>homeId</td>
<td>The family ID is obtained through the home SDK interface</td>
</tr>
<tr>
<td>requestCode</td>
<td>Request code, bring back in onActivityResult</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> iTuyaSceneBusinessService <span class="token operator">&amp;&amp;</span> HOME_ID <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            iTuyaSceneBusinessService<span class="token punctuation">.</span><span class="token function">addScene</span><span class="token punctuation">(</span>activity<span class="token punctuation">,</span> homeId<span class="token punctuation">,</span> requestCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre>
<h3 id="edit-scene"><a name="edit-scene" class="anchor-navigation-ex-anchor" href="#edit-scene"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.3. Edit Scene</h3>
<p>Enter scene edit page by obtaining scene data and family ID</p>
<p><strong>Declaration</strong></p>
<p>Enter edit scene</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">ITuyaSceneBusinessService</span><span class="token punctuation">.</span><span class="token function">editScene</span><span class="token punctuation">(</span><span class="token class-name">Activity</span> activity<span class="token punctuation">,</span> <span class="token keyword">long</span> homeId<span class="token punctuation">,</span><span class="token class-name">SceneBean</span> sceneBean<span class="token punctuation">,</span> <span class="token keyword">int</span> requestCode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>activity</td>
<td>Activity Object</td>
</tr>
<tr>
<td>homeId</td>
<td>The family ID is obtained through the home SDK interface </td>
</tr>
<tr>
<td>SceneBean</td>
<td>Scene data object, obtained through SDK Get Scene List interface</td>
</tr>
<tr>
<td>requestCode</td>
<td>Request code, bring back in onActivityResult</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token class-name">TuyaHomeSdk</span><span class="token punctuation">.</span><span class="token function">getSceneManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSceneList</span><span class="token punctuation">(</span>homeId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ITuyaResultCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">SceneBean</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SceneBean</span><span class="token punctuation">&gt;</span></span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">SceneBean</span> sceneBean <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> iTuyaSceneBusinessService<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        iTuyaSceneBusinessService<span class="token punctuation">.</span><span class="token function">editScene</span><span class="token punctuation">(</span><span class="token class-name">SceneActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> homeId<span class="token punctuation">,</span> sceneBean<span class="token punctuation">,</span> requestCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">String</span> errorCode<span class="token punctuation">,</span> <span class="token class-name">String</span> errorMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="set-geographic-location"><a name="set-geographic-location" class="anchor-navigation-ex-anchor" href="#set-geographic-location"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.4. Set geographic location</h3>
<p>The conditions of the scene and the effective time period need to set the geographic location of the app. If it is not set, the city information will not be automatically obtained when the condition is selected, but it can still be selected on the city list.</p>
<p><strong>Declaration</strong></p>
<p>Set scene conditions&#x2018;s location</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">ITuyaSceneBusinessService</span><span class="token punctuation">.</span><span class="token function">setAppLocatione</span><span class="token punctuation">(</span><span class="token keyword">double</span> longitude<span class="token punctuation">,</span> <span class="token keyword">double</span> latitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>longitude</td>
<td>Longitude,Long-distance business app provides access to related tripartite maps</td>
</tr>
<tr>
<td>latitude</td>
<td>Latitude,Provide relevant three-party maps for self-service access</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java">
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> iTuyaSceneBusinessService<span class="token punctuation">)</span><span class="token punctuation">{</span>           
    iTuyaSceneBusinessService<span class="token punctuation">.</span><span class="token function">setAppLocation</span><span class="token punctuation">(</span>lng<span class="token punctuation">,</span> lat<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="set-app-map-class"><a name="set-app-map-class" class="anchor-navigation-ex-anchor" href="#set-app-map-class"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.5. Set App Map Class</h3>
<p>The geographical location in the scene conditions, if you do not need a foreign account, you do not need to call, you need to set the map category in the foreign account, do not set the default to get the domestic city interface</p>
<p><strong>Declaration</strong></p>
<p>Set App Map Class</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">ITuyaSceneBusinessService</span><span class="token punctuation">.</span><span class="token function">setMapActivity</span><span class="token punctuation">(</span><span class="token class-name">Class</span> activity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Class</td>
<td>Map Activity class object</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> iTuyaSceneBusinessService<span class="token punctuation">)</span><span class="token punctuation">{</span>

            iTuyaSceneBusinessService<span class="token punctuation">.</span><span class="token function">setMapActivity</span><span class="token punctuation">(</span><span class="token class-name">MapActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre>
<h3 id="save-map-selection-data"><a name="save-map-selection-data" class="anchor-navigation-ex-anchor" href="#save-map-selection-data"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.6. Save map selection data</h3>
<p>After accessing the map class, you need to send the map selection data to the service package to update the conditional geographic location information</p>
<p><strong>Declaration</strong></p>
<p>Set up map data</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">ITuyaSceneBusinessService</span><span class="token punctuation">.</span><span class="token function">saveMapData</span><span class="token punctuation">(</span><span class="token keyword">double</span> longitude<span class="token punctuation">,</span> <span class="token keyword">double</span> latitude<span class="token punctuation">,</span><span class="token class-name">String</span> city<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>Parameters</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>longitude</td>
<td>longitude</td>
</tr>
<tr>
<td>latitude</td>
<td>latitude    </td>
</tr>
<tr>
<td>city</td>
<td>city</td>
</tr>
<tr>
<td>address</td>
<td>address</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> iTuyaSceneBusinessService<span class="token punctuation">)</span><span class="token punctuation">{</span>    
   iTuyaSceneBusinessService<span class="token punctuation">.</span><span class="token function">saveMapData</span><span class="token punctuation">(</span>lng<span class="token punctuation">,</span> lat<span class="token punctuation">,</span> city<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ipc/camera_panel.html" class="navigation navigation-prev " aria-label="Previous page: IPC Device BizBundle">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="faq/faq.html" class="navigation navigation-next " aria-label="Next page: FAQ BizBundle">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Scene BizBundle","level":"1.7.3.5","depth":3,"next":{"title":"FAQ BizBundle","level":"1.7.3.6","depth":3,"path":"3.17/faq/faq.md","ref":"./3.17/faq/faq.md","articles":[]},"previous":{"title":"IPC Device BizBundle","level":"1.7.3.4","depth":3,"path":"3.17/ipc/camera_panel.md","ref":"./3.17/ipc/camera_panel.md","articles":[]},"dir":"ltr"},"config":{"plugins":["addcssjs","richquotes","prism","-hightlight","anchors","js-sequence-diagram-full@>=0.3.1","splitter","github","anchor-navigation-ex","expandable-chapters-small","pageview-count","language-picker","hide-element"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism.css"],"lang":{"java":"java"},"ignore":["sequence"]},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/TuyaInc/tuyasmart_bizbundle_android_doc"},"livereload":{},"splitter":{},"search":{},"addcssjs":{"css":[],"js":["../scripts/mermaid.min.js","../scripts/index.js"]},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"js-sequence-diagram-full":{},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"richquotes":{},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"pageview-count":{},"expandable-chapters-small":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"3.17/scene.md","mtime":"2020-09-18T08:05:19.990Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-12-09T01:42:34.203Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    
    <script type="text/javascript" src="../../scripts/mermaid.min.js"></script>
    
    <script type="text/javascript" src="../../scripts/index.js"></script>
    

    </body>
</html>

